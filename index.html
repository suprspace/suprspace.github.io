<!DOCTYPE html>

<!--Copyright 2021-->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content= "ie=edge">
    <title>UN 1.0</title>
    
    <script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
    <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
    
    
</head>
    

<style>
    body {
        touch-action: manipulation;
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none;
    }
    .container {
        position: fixed;
        border: 1px solid lightgrey;
        width: 100px;
        height: 100px;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
    }
    #circle {
        height: 100px;
        width: 100px;
        background: blueviolet;
        border-radius: 50%;
    }
    .circle.move {
        transition: 2s;
    }
    #box {
        position: absolute;
        width: 90%;
        height: 90%;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        background: slateblue;
        position: fixed;
        opacity: 50%;
    }
    #uppad {
        position: absolute;
        top: 80%;
        left: 75%;
        width: 20px;
        height: 20px;
        background: #fff;
        border-radius: 3px;
        transform: rotate(45deg);
        margin-top: -25px;
    }
    #dnpad {
        position: absolute;
        top: 80%;
        left: 75%;
        width: 20px;
        height: 20px;
        background: #fff;
        border-radius: 3px;
        transform: rotate(225deg);
        margin-top: 25px;
    }
    #lpad {
        position: absolute;
        top: 80%;
        left: 75%;
        width: 20px;
        height: 20px;
        background: #fff;
        border-radius: 3px;
        transform: rotate(-45deg);
        margin-left: -25px;
    }
    #rpad {
        position: absolute;
        top: 80%;
        left: 75%;
        width: 20px;
        height: 20px;
        background: #fff;
        border-radius: 3px;
        transform: rotate(135deg);
        margin-left: 25px;
    }
    button {
        background: none;
        border: none;
    }
    .dpad {
        position: fixed;
        width: 100px;
        height: 100px;
        background-color: darkgrey;
        border: 1px solid #fff;
        mix-blend-mode: difference;
        opacity: 25%;
        top: 80%;
        left: 75%;
        transform: translate(-50%,-50%) rotate(45deg);
        margin-left: 10px;
        margin-top: 10px;
    }
    #mobiledisable {
        display: none;
    }
    @media only screen and (max-width: 800px) {
        #mobiledisable {
            display: block;
        }
    }
    #collide {
        position: fixed;
        width: 50px;
        height: 50px;
        background: red;
    }
</style>
    
<body>

    <div class="container">
    <div class="circle" id="circle"></div>
    </div>
    
    <div style="position:fixed;top: 20%; left: 50%;">
    <div id="collide"></div>
    </div>
    
    <div class="box" id="box"></div>
    
<div id="mobiledisable">
    <div class="dpad"></div>
    
<button id="uppad" ontouchstart="start1()" ontouchend="end1()"></button>
<button id="dnpad" ontouchstart="start2()" ontouchend="end2()"></button>
<button id="lpad" ontouchstart="start3()" ontouchend="end3()"></button>
<button id="rpad" ontouchstart="start4()" ontouchend="end4()"></button>
    
<p id="counter" style="color: transparent;"></p>
    </div>
    
    
    <p id="compass"></p>
<!--
3=up 4=down 1=left 2=right
-->
    
</body>
    
    
<script>
    
    var circle = document.getElementById("circle");
    var box = document.getElementById("box");
    
    var collide = document.getElementById("collide");
    
      function collision2($circle, $collide) {
      var x_1 = $circle.offset().left;
      var y_1 = $circle.offset().top;
      var h_1 = $circle.outerHeight(true);
      var w_1 = $circle.outerWidth(true);
      var b_1 = y_1 + h_1;
      var r_1 = x_1 + w_1;
      var x_2 = $collide.offset().left;
      var y_2 = $collide.offset().top;
      var h_2 = $collide.outerHeight(true);
      var w_2 = $collide.outerWidth(true);
      var b_2 = y_2 + h_2;
      var r_2 = x_2 + w_2;
          
    
      if (b_1 < y_2 || y_1 > b_2 || r_1 < x_2 || x_1 > r_2) {
          return;
        } else {
            return moveBy = -20,
                setTimeout(function(){moveBy=0},100),
                setTimeout(function(){moveBy=10},500);
        }
}
    
    
    window.setInterval(function() {
    $('#result').text(collision2($('#circle'), $('#collide')));
}, 200);
    
        
      function collision($circle, $box) {
      var x1 = $circle.offset().left;
      var y1 = $circle.offset().top;
      var h1 = $circle.outerHeight(true);
      var w1 = $circle.outerWidth(true);
      var b1 = y1 + h1;
      var r1 = x1 + w1;
      var x2 = $box.offset().left;
      var y2 = $box.offset().top;
      var h2 = $box.outerHeight(true);
      var w2 = $box.outerWidth(true);
      var b2 = y2 + h2;
      var r2 = x2 + w2;
          
          
      if (b1 < y2) {
          return document.getElementById("box").style.background="green",//top
          document.getElementById("circle").style.top="0",
          document.getElementById("circle").classList.add('move'),
          moveBy = 0,
          setTimeout(function(){moveBy = 10},2000),
          setTimeout(function(){document.getElementById("circle").classList.remove('move')},2000);
      } else if (y1 > b2) {
          return document.getElementById("box").style.background="pink",//down
          document.getElementById("circle").style.top="0",
          document.getElementById("circle").classList.add('move'),
          moveBy = 0,
          setTimeout(function(){moveBy = 10},2000),
          setTimeout(function(){document.getElementById("circle").classList.remove('move')},2000);
      } else if (r1 < x2) {
          return document.getElementById("box").style.background="red",//left
          document.getElementById("circle").style.left="0",
          document.getElementById("circle").classList.add('move'),
          moveBy = 0,
          setTimeout(function(){moveBy = 10},2000),
          setTimeout(function(){document.getElementById("circle").classList.remove('move')},2000);
      } else if (x1 > r2) {
          return document.getElementById("box").style.background="orange",//right
          document.getElementById("circle").style.left="0",
          document.getElementById("circle").classList.add('move'),
          moveBy = 0,
          setTimeout(function(){moveBy = 10},2000),
          setTimeout(function(){document.getElementById("circle").classList.remove('move')},2000);
      } else {
          return document.getElementById("box").style.background="blue";//none
      }
    }

    
    window.setInterval(function() {
    $('#result').text(collision($('#circle'), $('#box')));
}, 200);

    
    
    let moveBy = 10;
    
    var wrap = document.getElementById('compass');
    var compass = 0;
    
    window.addEventListener('load', () => {
        circle.style.position = 'absolute';
        circle.style.left = 0;
        circle.style.top = 0;
    });
    
    window.addEventListener('keydown', (e) => {
        switch(e.key) {
            case 'ArrowLeft':
                circle.style.left = parseInt(circle.style.left) - moveBy + 'px';
                wrap.innerHTML = compass;
                compass = 1;
                break;
            case 'ArrowRight':
                circle.style.left = parseInt(circle.style.left) + moveBy + 'px';
                wrap.innerHTML = compass;
                compass = 2;
                break;
            case 'ArrowUp':
                circle.style.top = parseInt(circle.style.top) - moveBy + 'px';
                wrap.innerHTML = compass;
                compass = 3;
                break;
            case 'ArrowDown':
                circle.style.top = parseInt(circle.style.top) + moveBy + 'px';
                wrap.innerHTML = compass;
                compass =4;
                break;
        }
    });
    
  var wrapper = document.getElementById('counter');
  var counter;
  var count = 0;
  
  function start1() {
    counter = setInterval(function() {
      wrapper.innerHTML = count;
      circle.style.top = parseInt(circle.style.top) - moveBy + 'px';
      count++;
    }, 50);
  }
  function end1() {
    clearInterval(counter)
  }
    
    
      function start2() {
    counter = setInterval(function() {
      wrapper.innerHTML = count;
      circle.style.top = parseInt(circle.style.top) + moveBy + 'px';
      count++;
    }, 50);
  }
  function end2() {
    clearInterval(counter)
  }
    
      function start3() {
    counter = setInterval(function() {
      wrapper.innerHTML = count;
      circle.style.left = parseInt(circle.style.left) - moveBy + 'px';
      count++;
    }, 50);
  }
  function end3() {
    clearInterval(counter)
  }
    
      function start4() {
    counter = setInterval(function() {
      wrapper.innerHTML = count;
      circle.style.left = parseInt(circle.style.left) + moveBy + 'px';
      count++;
    }, 50);
  }
  function end4() {
    clearInterval(counter)
  }
    
</script>

 
<!--
<style>
    
    
    
</style>
    
<body>
    
    
    
</body>
    
    
<script>
    
    
    
</script>
-->
    
<script>console.log("Copyright 2021");</script>
</html>